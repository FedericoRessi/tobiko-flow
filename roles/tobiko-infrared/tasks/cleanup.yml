
---

- name: cleanup OpenStack hypervisor host
  include_tasks: infrared/exec.yml
  vars:
    infrared_args: >
      virsh
        --host-address "{{ tobiko_infrared_config.virsh.host_address }}"
        --host-key "{{ tobiko_infrared_config.virsh.host_key }}"
        --cleanup yes

- name: remove files
  file:
    path: "{{ item }}"
    state: absent
  items:
    - "{{ tobiko_infrared_config.src_dir }}"
    - "{{ tobiko_infrared_config.log_file }}"
    - "{{ tobiko_infrared_config.venv_dir }}"
    - "{{ tobiko_infrared_config.out_file }}"
    - "{{ tobiko_infrared_config.err_file }}"
